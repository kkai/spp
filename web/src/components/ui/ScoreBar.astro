---
interface Props {
  score: number;
  max?: number;
  color?: 'ai' | 'wearables' | 'primary';
  label?: string;
  showValue?: boolean;
}

const { score, max = 10, color = 'primary', label, showValue = true } = Astro.props;
const pct = Math.min((score / max) * 100, 100);

const barColors = {
  ai: 'bg-[var(--color-ai)]',
  wearables: 'bg-[var(--color-wearables)]',
  primary: 'bg-primary-500',
};
---

<div class="flex items-center gap-3">
  {label && <span class="text-xs font-medium shrink-0 w-20" style="color: var(--text-secondary);">{label}</span>}
  <div class="flex-1 h-2 rounded-full overflow-hidden" style="background: var(--surface-2);">
    <div
      class:list={['h-full rounded-full score-bar-fill', barColors[color]]}
      style={`width: ${pct}%`}
    />
  </div>
  {showValue && (
    <span class="text-xs font-mono tabular-nums shrink-0 w-8 text-right" style="color: var(--text-muted);">
      {score.toFixed(1)}
    </span>
  )}
</div>
